REMOVED
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
    <style>
        :root {
            --main-point: #550216;
            --main-brown: #92400e;
            --main-bg: #fff;
            --soft-bg: #fafafa;
            --border-sfu: #ededed;
            --sub-text: #aaaaaa;
            --header-gradient: linear-gradient(90deg, #fff 60%, #f8f2f5 100%);
            --card-radius: 1.1rem;
            --main-dark: #47340a;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--main-bg);
            color: var(--main-dark);
            font-size: 14px;
            line-height: 1.5;
        }

        .sfu-header {
            background: var(--header-gradient);
            border-bottom: 1.5px solid var(--border-sfu);
            box-shadow: 0 2px 10px -8px rgba(234, 234, 234, 0.9);
            padding: 1rem 1.25rem;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1536px;
            margin: 0 auto;
        }

        .logo {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--main-point);
            text-decoration: none;
        }

        .header-buttons {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .sfu-btn-ghost {
            background: none;
            color: var(--main-point);
            border: none;
            padding: 0.48rem 1.1rem;
            border-radius: 0.5rem;
            transition: background 0.18s;
            cursor: pointer;
            font-size: 0.875rem;
        }

        .sfu-btn-ghost:hover {
            background: #f3e9ef;
        }

        .visitor-counter {
            text-align: center;
            padding: 1rem;
            background: var(--soft-bg);
            border-bottom: 1px solid var(--border-sfu);
            font-size: 0.875rem;
            color: var(--sub-text);
        }

        .favorites-section {
            padding: 2rem 1.25rem;
            background: #f9fafb;
            border-bottom: 2px solid var(--border-sfu);
        }

        .favorites-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .favorites-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.125rem;
            font-weight: 500;
            color: var(--main-point);
        }

        .button-group {
            display: flex;
            gap: 0.5rem;
        }

        .btn-small {
            padding: 0.5rem 0.75rem;
            border: none;
            border-radius: 0.5rem;
            font-size: 0.75rem;
            color: white;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-green { background: #10b981; }
        .btn-blue { background: #3b82f6; }
        .btn-purple { background: #8b5cf6; }

        .btn-green:hover { background: #059669; }
        .btn-blue:hover { background: #2563eb; }
        .btn-purple:hover { background: #7c3aed; }

        .widgets-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .widget {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            padding: 1rem;
            min-height: 12rem;
            cursor: move;
            transition: all 0.2s;
        }

        .widget.hourly {
            min-height: 24rem;
        }

        .widget:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .favorites-content {
            display: grid;
            grid-template-columns: 2fr 4fr;
            gap: 1.5rem;
        }

        .folders-section h3,
        .favorites-list h3 {
            font-size: 0.875rem;
            font-weight: 500;
            color: #374151;
            margin-bottom: 0.75rem;
        }

        .folders-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
        }

        .folder {
            border: 2px dashed #d1d5db;
            border-radius: 0.5rem;
            padding: 0.75rem;
            transition: all 0.2s;
            cursor: move;
        }

        .folder.drag-over {
            border-color: #3b82f6;
            background: #eff6ff;
        }

        .folder-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .folder-title {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.75rem;
            font-weight: 500;
            color: #374151;
            cursor: pointer;
        }

        .folder-title:hover {
            color: #3b82f6;
        }

        .delete-btn {
            color: #ef4444;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 0.75rem;
        }

        .delete-btn:hover {
            color: #dc2626;
        }

        .folder-items {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
            max-height: 10rem;
            overflow-y: auto;
        }

        .favorites-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 0.5rem;
        }

        .favorite-item,
        .folder-item {
            background: white;
            border: 2px solid var(--border-sfu);
            border-radius: 0.25rem;
            padding: 0.25rem;
            cursor: move;
            transition: all 0.2s;
            height: 1.5rem;
            position: relative;
        }

        .favorite-item:hover,
        .folder-item:hover {
            box-shadow: 0 4px 12px -2px #ede0e5;
        }

        .item-content {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            height: 100%;
        }

        .favicon {
            width: 0.75rem;
            height: 0.75rem;
            flex-shrink: 0;
        }

        .site-title {
            flex: 1;
            font-size: 0.75rem;
            font-weight: 500;
            color: #374151;
            text-decoration: none;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .site-title:hover {
            color: #3b82f6;
        }

        .remove-btn {
            position: absolute;
            top: 0;
            right: 0;
            width: 0.75rem;
            height: 0.75rem;
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 0.625rem;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .favorite-item:hover .remove-btn,
        .folder-item:hover .remove-btn {
            opacity: 1;
        }

        .main-layout {
            display: flex;
            gap: 2rem;
            max-width: 1536px;
            margin: 0 auto;
            padding: 2rem 1.25rem;
        }

        .ad-column {
            width: 6rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .ad-banner {
            background: #f3f4f6;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            padding: 1rem;
            text-align: center;
            font-size: 0.75rem;
            color: #6b7280;
            height: 8rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .categories-grid {
            flex: 1;
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 1.25rem;
        }

        .sfu-category-card {
            background: var(--main-bg);
            border: 1.5px solid var(--border-sfu);
            border-radius: var(--card-radius);
            box-shadow: 0 2px 10px 0 rgba(241, 230, 235, 0.1);
            transition: all 0.2s;
            padding: 0.75rem;
            height: 15rem;
            display: flex;
            flex-direction: column;
        }

        .sfu-category-card:hover {
            box-shadow: 0 8px 24px 0 rgba(240, 228, 233, 0.1);
            border-color: #e8c2d4;
        }

        .category-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.5rem;
        }

        .category-icon {
            font-size: 1rem;
            flex-shrink: 0;
        }

        .category-title {
            font-size: 0.9rem;
            color: var(--main-point);
            font-weight: 500;
        }

        .category-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .websites-list {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .website-item {
            background: #fff;
            border-radius: 0.25rem;
            border: 2px solid #ddd;
            padding: 0.5rem;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
            color: inherit;
        }

        .website-item:hover {
            border-color: #e8c2d4;
            box-shadow: 0 2px 10px 0 rgba(240, 228, 233, 0.3);
        }

        .website-favicon {
            width: 1rem;
            height: 1rem;
            flex-shrink: 0;
        }

        .website-info {
            flex: 1;
            min-width: 0;
        }

        .website-title {
            font-size: 0.875rem;
            font-weight: 500;
            color: #374151;
            margin-bottom: 0.125rem;
        }

        .website-description {
            font-size: 0.75rem;
            color: #6b7280;
            line-height: 1.3;
        }

        .star-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.125rem;
            color: var(--main-point);
            flex-shrink: 0;
        }

        .star-btn.favorited {
            color: #fbbf24;
        }

        .more-btn {
            background: transparent;
            border: 1px solid #ededed;
            color: var(--main-point);
            cursor: pointer;
            border-radius: 0.25rem;
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
            margin-top: 0.5rem;
            transition: all 0.2s;
        }

        .more-btn:hover {
            background: #fbeaf2;
            border-color: #e8c2d4;
        }

        .floating-contact {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: var(--main-point);
            color: white;
            border: none;
            border-radius: 0.75rem;
            padding: 0.75rem 1rem;
            box-shadow: 0 4px 10px -6px rgba(0, 0, 0, 0.13);
            cursor: pointer;
            font-size: 0.875rem;
            z-index: 1000;
        }

        .floating-contact:hover {
            filter: brightness(0.97);
        }

        .modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.33);
            z-index: 1200;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .modal.open {
            display: flex;
        }

        .modal-content {
            background: white;
            width: min(400px, 96vw);
            border-radius: 0.9rem;
            border: 1px solid #eee;
            box-shadow: 0 10px 32px rgba(0, 0, 0, 0.08);
            overflow: hidden;
        }

        .modal-header {
            padding: 1.5rem 1.5rem 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--main-point);
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #6b7280;
            cursor: pointer;
        }

        .modal-body {
            padding: 1.5rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #374151;
        }

        .form-input,
        .form-textarea,
        .form-select {
            width: 100%;
            border: 1px solid #e6e6e6;
            border-radius: 0.375rem;
            padding: 0.7rem 0.9rem;
            outline: none;
            font-size: 0.875rem;
        }

        .form-input:focus,
        .form-textarea:focus,
        .form-select:focus {
            border-color: var(--main-point);
            box-shadow: 0 0 0 2px rgba(233, 167, 194, 0.4);
        }

        .form-textarea {
            resize: vertical;
            min-height: 6rem;
        }

        .btn-primary {
            padding: 0.75rem 1rem;
            border: none;
            border-radius: 0.375rem;
            background: var(--main-point);
            color: white;
            cursor: pointer;
            font-weight: 500;
            width: 100%;
            transition: all 0.2s;
        }

        .btn-primary:hover {
            filter: brightness(0.95);
        }

        .footer {
            background: #f9fafb;
            border-top: 1px solid var(--border-sfu);
            padding: 2rem 1.25rem;
            text-align: center;
            color: var(--sub-text);
            font-size: 0.875rem;
        }

        /* ë“œë˜ê·¸ ì•¤ ë“œë¡­ ìŠ¤íƒ€ì¼ */
        .drag-over {
            border-color: #3b82f6 !important;
            background: #eff6ff !important;
        }

        .dragging {
            opacity: 0.5;
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 1280px) {
            .categories-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 768px) {
            .ad-column {
                display: none;
            }
            .categories-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .favorites-content {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            .folders-grid {
                grid-template-columns: 1fr;
            }
            .favorites-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            .widgets-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 640px) {
            .categories-grid {
                grid-template-columns: 1fr;
            }
            .favorites-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            .widgets-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <!-- í—¤ë” -->
    <header class="sfu-header">
        <div class="header-content">
            <a href="#" class="logo">SFU - Sites For You</a>
            <div class="header-buttons">
                <button class="sfu-btn-ghost" onclick="toggleDescriptions()">ì„¤ëª… í† ê¸€</button>
                <button class="sfu-btn-ghost" onclick="setAsHomepage()">ì‹œì‘í˜ì´ì§€ ì„¤ì •</button>
                <button class="sfu-btn-ghost" onclick="saveSettings()">ğŸ’¾ ì €ì¥</button>
                <button class="sfu-btn-ghost" onclick="goHome()">ğŸ  í™ˆ</button>
                <button class="sfu-btn-ghost" onclick="openContactModal()">ğŸ“§ ë¬¸ì˜</button>
            </div>
        </div>
    </header>

    <!-- ë°©ë¬¸ì ì¹´ìš´í„° -->
    <div class="visitor-counter">
        ì˜¤ëŠ˜ ë°©ë¬¸ì: <span id="todayCount">1,234</span> | ì „ì²´ ë°©ë¬¸ì: <span id="totalCount">12,345</span>
    </div>

    <!-- ì¦ê²¨ì°¾ê¸° ì„¹ì…˜ -->
    <section class="favorites-section">
        <div class="favorites-header">
            <div class="favorites-title">
                ğŸ“ ì¦ê²¨ì°¾ê¸°
                <button class="btn-green btn-small" onclick="openAddSiteModal()">+ ì‚¬ì´íŠ¸ ì¶”ê°€</button>
            </div>
            <div class="button-group">
                <button class="btn-green btn-small" onclick="showWidgetSelector()">+ ìœ„ì ¯ ì¶”ê°€</button>
                <button class="btn-blue btn-small" onclick="showNewFolderInput()">+ í´ë” ì¶”ê°€</button>
                <button class="btn-purple btn-small" onclick="handleSignup()">ğŸ’¾ ì €ì¥</button>
            </div>
        </div>

        <!-- ìœ„ì ¯ ì„¹ì…˜ -->
        <div id="widgetsSection" class="hidden">
            <h3>ğŸ”§ ìœ„ì ¯</h3>
            <div class="widgets-grid" id="widgetsGrid">
                <!-- ìœ„ì ¯ë“¤ì´ ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </div>
        </div>

        <!-- í´ë” ìƒì„± ì…ë ¥ -->
        <div id="newFolderInput" class="hidden" style="margin-bottom: 1rem; padding: 0.75rem; background: white; border-radius: 0.5rem; border: 1px solid #e5e7eb;">
            <div style="display: flex; gap: 0.5rem;">
                <input type="text" id="folderNameInput" placeholder="í´ë” ì´ë¦„" style="flex: 1; padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 0.25rem;">
                <button class="btn-green btn-small" onclick="createFolder()">ìƒì„±</button>
                <button style="background: #6b7280; color: white; border: none; padding: 0.5rem 0.75rem; border-radius: 0.25rem; cursor: pointer;" onclick="hideNewFolderInput()">ì·¨ì†Œ</button>
            </div>
        </div>

        <!-- ì¦ê²¨ì°¾ê¸° ì»¨í…ì¸  -->
        <div class="favorites-content">
            <!-- í´ë” ì„¹ì…˜ -->
            <div class="folders-section">
                <h3>ğŸ“‚ í´ë”</h3>
                <div class="folders-grid" id="foldersGrid">
                    <!-- í´ë”ë“¤ì´ ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                </div>
            </div>

            <!-- ì¦ê²¨ì°¾ê¸° ëª©ë¡ -->
            <div class="favorites-list">
                <h3>ğŸ“Œ ì¦ê²¨ì°¾ê¸°</h3>
                <div class="favorites-grid" id="favoritesGrid">
                    <!-- ì¦ê²¨ì°¾ê¸° í•­ëª©ë“¤ì´ ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                </div>
            </div>
        </div>
    </section>

    <!-- ë©”ì¸ ë ˆì´ì•„ì›ƒ -->
    <main class="main-layout">
        <!-- ì™¼ìª½ ê´‘ê³  -->
        <div class="ad-column">
            <div class="ad-banner">ê´‘ê³ 1</div>
            <div class="ad-banner">ê´‘ê³ 2</div>
        </div>

        <!-- ì¹´í…Œê³ ë¦¬ ê·¸ë¦¬ë“œ -->
        <div class="categories-grid" id="categoriesGrid">
            <!-- ì¹´í…Œê³ ë¦¬ë“¤ì´ ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
        </div>

        <!-- ì˜¤ë¥¸ìª½ ê´‘ê³  -->
        <div class="ad-column">
            <div class="ad-banner">ê´‘ê³ 3</div>
            <div class="ad-banner">ê´‘ê³ 4</div>
        </div>
    </main>

    <!-- í”Œë¡œíŒ… ë¬¸ì˜ ë²„íŠ¼ -->
    <button class="floating-contact" onclick="openContactModal()">
        ğŸ“§ ë¬¸ì˜í•˜ê¸°
    </button>

    <!-- í‘¸í„° -->
    <footer class="footer">
        <p>&copy; 2024 SFU - Sites For You. í•œêµ­ì–´ ê±´ì¶•/ë””ìì¸ ì›¹ì‚¬ì´íŠ¸ ë””ë ‰í† ë¦¬.</p>
    </footer>

    <!-- ë¬¸ì˜ ëª¨ë‹¬ -->
    <div id="contactModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">ğŸ“§ ë¬¸ì˜í•˜ê¸°</h3>
                <button class="close-btn" onclick="closeContactModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form onsubmit="submitContact(event)">
                    <div class="form-group">
                        <label class="form-label">ì´ë¦„</label>
                        <input type="text" class="form-input" id="contactName" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ì´ë©”ì¼</label>
                        <input type="email" class="form-input" id="contactEmail" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ë©”ì‹œì§€</label>
                        <textarea class="form-textarea" id="contactMessage" required></textarea>
                    </div>
                    <button type="submit" class="btn-primary">ë©”ì‹œì§€ ë³´ë‚´ê¸°</button>
                </form>
            </div>
        </div>
    </div>

    <!-- ì‚¬ì´íŠ¸ ì¶”ê°€ ëª¨ë‹¬ -->
    <div id="addSiteModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">+ ì‚¬ì´íŠ¸ ì¶”ê°€</h3>
                <button class="close-btn" onclick="closeAddSiteModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form onsubmit="submitAddSite(event)">
                    <div class="form-group">
                        <label class="form-label">ì‚¬ì´íŠ¸ ì´ë¦„</label>
                        <input type="text" class="form-input" id="siteTitle" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ì‚¬ì´íŠ¸ URL</label>
                        <input type="url" class="form-input" id="siteUrl" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ì„¤ëª…</label>
                        <textarea class="form-textarea" id="siteDescription"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ì¹´í…Œê³ ë¦¬</label>
                        <select class="form-select" id="siteCategory" required>
                            <option value="">ì¹´í…Œê³ ë¦¬ ì„ íƒ</option>
                            <option value="ê±´ì¶• í¬í„¸">ê±´ì¶• í¬í„¸</option>
                            <option value="ê±´ì¶• íšŒì‚¬">ê±´ì¶• íšŒì‚¬</option>
                            <option value="ì¸í…Œë¦¬ì–´">ì¸í…Œë¦¬ì–´</option>
                            <option value="ë””ìì¸">ë””ìì¸</option>
                            <option value="ì‹œê³µ ì—…ì²´">ì‹œê³µ ì—…ì²´</option>
                            <option value="ìì¬ ì—…ì²´">ìì¬ ì—…ì²´</option>
                            <option value="ì»¤ë®¤ë‹ˆí‹°">ì»¤ë®¤ë‹ˆí‹°</option>
                            <option value="êµìœ¡">êµìœ¡</option>
                            <option value="ë¯¸ë””ì–´">ë¯¸ë””ì–´</option>
                        </select>
                    </div>
                    <button type="submit" class="btn-primary">ì‚¬ì´íŠ¸ ì¶”ê°€</button>
                </form>
            </div>
        </div>
    </div>

    <!-- ìœ„ì ¯ ì„ íƒ ëª¨ë‹¬ -->
    <div id="widgetModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">ğŸ”§ ìœ„ì ¯ ì¶”ê°€</h3>
                <button class="close-btn" onclick="closeWidgetModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div style="display: grid; gap: 0.5rem;">
                    <button class="btn-primary" onclick="addWidget('weather')" style="margin-bottom: 0.5rem;">ğŸŒ¤ï¸ ë„¤ì´ë²„ ë‚ ì”¨</button>
                    <button class="btn-primary" onclick="addWidget('weather-weekly')" style="margin-bottom: 0.5rem;">ğŸ“… ìš”ì¼ë³„ ë‚ ì”¨</button>
                    <button class="btn-primary" onclick="addWidget('weather-hourly')" style="margin-bottom: 0.5rem;">ğŸ• ì‹œê°„ëŒ€ë³„ ë‚ ì”¨</button>
                    <button class="btn-primary" onclick="addWidget('clock')" style="margin-bottom: 0.5rem;">ğŸ• ì‹œê³„</button>
                    <button class="btn-primary" onclick="addWidget('memo')" style="margin-bottom: 0.5rem;">ğŸ“ ë©”ëª¨</button>
                    <button class="btn-primary" onclick="addWidget('todo')" style="margin-bottom: 0.5rem;">âœ… í•  ì¼</button>
                    <button class="btn-primary" onclick="addWidget('calendar')">ğŸ“… ë‹¬ë ¥</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ë°ì´í„° ì €ì¥ì†Œ
        let favoritesData = {
            items: [],
            folders: [],
            widgets: []
        };

        let customSites = [];
        let showDescriptions = false;
        let expandedCategories = new Set();

        // ì›¹ì‚¬ì´íŠ¸ ë°ì´í„°
        const websites = [
            {
                id: 'archidaily',
                title: 'ArchDaily',
                url: 'https://www.archdaily.com',
                description: 'ì„¸ê³„ ìµœëŒ€ ê±´ì¶• ì •ë³´ ì‚¬ì´íŠ¸',
                category: 'ê±´ì¶• í¬í„¸'
            },
            {
                id: 'dezeen',
                title: 'Dezeen',
                url: 'https://www.dezeen.com',
                description: 'ë””ìì¸ê³¼ ê±´ì¶• ë§¤ê±°ì§„',
                category: 'ë¯¸ë””ì–´'
            },
            {
                id: 'architizer',
                title: 'Architizer',
                url: 'https://architizer.com',
                description: 'ê±´ì¶• í”„ë¡œì íŠ¸ ê°¤ëŸ¬ë¦¬',
                category: 'ê±´ì¶• í¬í„¸'
            },
            // ë” ë§ì€ ì›¹ì‚¬ì´íŠ¸ ë°ì´í„°...
        ];

        const categoryConfig = {
            'ê±´ì¶• í¬í„¸': { icon: 'ğŸ›ï¸', color: '#3b82f6' },
            'ê±´ì¶• íšŒì‚¬': { icon: 'ğŸ¢', color: '#10b981' },
            'ì¸í…Œë¦¬ì–´': { icon: 'ğŸ ', color: '#f59e0b' },
            'ë””ìì¸': { icon: 'ğŸ¨', color: '#8b5cf6' },
            'ì‹œê³µ ì—…ì²´': { icon: 'ğŸ”¨', color: '#ef4444' },
            'ìì¬ ì—…ì²´': { icon: 'ğŸ§±', color: '#6b7280' },
            'ì»¤ë®¤ë‹ˆí‹°': { icon: 'ğŸ‘¥', color: '#06b6d4' },
            'êµìœ¡': { icon: 'ğŸ“š', color: '#84cc16' },
            'ë¯¸ë””ì–´': { icon: 'ğŸ“°', color: '#f97316' }
        };

        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ë°ì´í„° ë¡œë“œ
        function loadData() {
            const savedFavorites = localStorage.getItem('sfu-favorites-v3');
            if (savedFavorites) {
                try {
                    favoritesData = JSON.parse(savedFavorites);
                } catch (e) {
                    console.error('Failed to parse favorites:', e);
                }
            }

            const savedCustomSites = localStorage.getItem('sfu-custom-sites');
            if (savedCustomSites) {
                try {
                    customSites = JSON.parse(savedCustomSites);
                } catch (e) {
                    console.error('Failed to parse custom sites:', e);
                }
            }
        }

        // ë°ì´í„° ì €ì¥
        function saveData() {
            localStorage.setItem('sfu-favorites-v3', JSON.stringify(favoritesData));
            localStorage.setItem('sfu-custom-sites', JSON.stringify(customSites));
        }

        // ì´ˆê¸°í™”
        function init() {
            loadData();
            renderFavorites();
            renderCategories();
            updateVisitorCount();
            setupDragAndDrop();
        }

        // ì¦ê²¨ì°¾ê¸° ë Œë”ë§
        function renderFavorites() {
            // ìœ„ì ¯ ë Œë”ë§
            if (favoritesData.widgets.length > 0) {
                document.getElementById('widgetsSection').classList.remove('hidden');
                renderWidgets();
            } else {
                document.getElementById('widgetsSection').classList.add('hidden');
            }

            // í´ë” ë Œë”ë§
            renderFolders();

            // ì¦ê²¨ì°¾ê¸° ëª©ë¡ ë Œë”ë§
            renderFavoritesList();
        }

        // ìœ„ì ¯ ë Œë”ë§
        function renderWidgets() {
            const widgetsGrid = document.getElementById('widgetsGrid');
            widgetsGrid.innerHTML = '';

            favoritesData.widgets.forEach((widget, index) => {
                const widgetElement = createWidgetElement(widget, index);
                widgetsGrid.appendChild(widgetElement);
            });
        }

        // ìœ„ì ¯ ì—˜ë¦¬ë¨¼íŠ¸ ìƒì„±
        function createWidgetElement(widget, index) {
            const div = document.createElement('div');
            div.className = `widget ${widget.type === 'weather-hourly' ? 'hourly' : ''}`;
            div.draggable = true;
            div.dataset.widgetIndex = index;
            div.dataset.widgetId = widget.id;

            let content = '';
            switch (widget.type) {
                case 'weather':
                    content = `
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                            <h4 style="font-size: 0.75rem; font-weight: 500;">ğŸŒ¤ï¸ ë„¤ì´ë²„ ë‚ ì”¨</h4>
                            <div>
                                <button onclick="openWeatherLocation('${widget.id}')" style="font-size: 0.625rem; color: #3b82f6; background: #eff6ff; border: none; padding: 0.125rem 0.25rem; border-radius: 0.125rem; cursor: pointer;">ìœ„ì¹˜ì„¤ì •</button>
                                <button onclick="removeWidget('${widget.id}')" style="color: #6b7280; background: none; border: none; cursor: pointer; margin-left: 0.25rem;">âœ•</button>
                            </div>
                        </div>
                        <div style="text-align: center; cursor: pointer;" onclick="openNaverWeather()">
                            <div style="font-size: 2rem; margin-bottom: 0.25rem;">â˜€ï¸</div>
                            <p style="font-size: 1.25rem; font-weight: bold; color: #3b82f6; margin-bottom: 0.25rem;">22Â°C</p>
                            <p style="font-size: 0.75rem; color: #6b7280; margin-bottom: 0.5rem;">ì„œìš¸, ë§‘ìŒ</p>
                            <div style="display: flex; justify-content: space-between; font-size: 0.75rem; color: #9ca3af;">
                                <span>ìµœê³  25Â°</span>
                                <span>ìµœì € 18Â°</span>
                            </div>
                            <p style="font-size: 0.75rem; color: #3b82f6; margin-top: 0.25rem;">ë„¤ì´ë²„ ë‚ ì”¨ ë³´ê¸°</p>
                        </div>
                    `;
                    break;
                case 'weather-weekly':
                    content = `
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                            <h4 style="font-size: 0.75rem; font-weight: 500;">ğŸ“… ìš”ì¼ë³„ ë‚ ì”¨</h4>
                            <button onclick="removeWidget('${widget.id}')" style="color: #6b7280; background: none; border: none; cursor: pointer;">âœ•</button>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 0.5rem; flex: 1; overflow-y: auto;">
                            ${['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'].map(day => `
                                <div style="display: flex; align-items: center; justify-content: space-between; font-size: 0.75rem; padding: 0.25rem; border-radius: 0.125rem;">
                                    <span style="width: 1.5rem;">${day}</span>
                                    <span style="font-size: 0.875rem;">ğŸŒ¤ï¸</span>
                                    <div style="display: flex; gap: 0.5rem;">
                                        <span style="color: #3b82f6;">${Math.floor(Math.random() * 10) + 20}Â°</span>
                                        <span style="color: #9ca3af;">${Math.floor(Math.random() * 10) + 10}Â°</span>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    `;
                    break;
                case 'weather-hourly':
                    content = `
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                            <h4 style="font-size: 0.75rem; font-weight: 500;">ğŸ• ì‹œê°„ë³„ ë‚ ì”¨</h4>
                            <button onclick="removeWidget('${widget.id}')" style="color: #6b7280; background: none; border: none; cursor: pointer;">âœ•</button>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 0.5rem; flex: 1; overflow-y: auto;">
                            ${Array.from({length: 8}, (_, i) => i * 3).map(hour => `
                                <div style="display: flex; align-items: center; justify-content: space-between; font-size: 0.75rem; padding: 0.25rem; border-radius: 0.125rem;">
                                    <span style="width: 3rem;">${hour.toString().padStart(2, '0')}:00</span>
                                    <span style="font-size: 0.875rem;">ğŸŒ¤ï¸</span>
                                    <span style="color: #3b82f6;">${Math.floor(Math.random() * 10) + 15}Â°</span>
                                    <span style="color: #9ca3af;">${Math.floor(Math.random() * 100)}%</span>
                                </div>
                            `).join('')}
                        </div>
                    `;
                    break;
                case 'clock':
                    content = `
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                            <h4 style="font-size: 0.75rem; font-weight: 500;">ğŸ• ì‹œê³„</h4>
                            <button onclick="removeWidget('${widget.id}')" style="color: #6b7280; background: none; border: none; cursor: pointer;">âœ•</button>
                        </div>
                        <div style="text-align: center; flex: 1; display: flex; flex-direction: column; justify-content: center;">
                            <div id="clock-${widget.id}" style="font-size: 1.5rem; font-weight: bold; color: #374151; margin-bottom: 0.5rem;">00:00:00</div>
                            <div style="font-size: 0.875rem; color: #6b7280;">${new Date().toLocaleDateString('ko-KR', { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' })}</div>
                        </div>
                    `;
                    break;
                case 'memo':
                    content = `
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                            <h4 style="font-size: 0.75rem; font-weight: 500;">ğŸ“ ë©”ëª¨</h4>
                            <button onclick="removeWidget('${widget.id}')" style="color: #6b7280; background: none; border: none; cursor: pointer;">âœ•</button>
                        </div>
                        <textarea placeholder="ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." style="width: 100%; flex: 1; border: 1px solid #e5e7eb; border-radius: 0.25rem; padding: 0.5rem; font-size: 0.75rem; resize: none; outline: none;" onchange="saveMemo('${widget.id}', this.value)"></textarea>
                    `;
                    break;
                case 'todo':
                    content = `
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                            <h4 style="font-size: 0.75rem; font-weight: 500;">âœ… í•  ì¼</h4>
                            <button onclick="removeWidget('${widget.id}')" style="color: #6b7280; background: none; border: none; cursor: pointer;">âœ•</button>
                        </div>
                        <div style="flex: 1; display: flex; flex-direction: column;">
                            <div style="display: flex; gap: 0.25rem; margin-bottom: 0.5rem;">
                                <input type="text" placeholder="í•  ì¼ ì¶”ê°€..." style="flex: 1; border: 1px solid #e5e7eb; border-radius: 0.25rem; padding: 0.25rem; font-size: 0.75rem;" onkeypress="if(event.key==='Enter') addTodo('${widget.id}', this)">
                                <button onclick="addTodo('${widget.id}', this.previousElementSibling)" style="background: #10b981; color: white; border: none; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.75rem; cursor: pointer;">+</button>
                            </div>
                            <div id="todo-list-${widget.id}" style="flex: 1; overflow-y: auto; font-size: 0.75rem;"></div>
                        </div>
                    `;
                    break;
                case 'calendar':
                    content = `
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                            <h4 style="font-size: 0.75rem; font-weight: 500;">ğŸ“… ë‹¬ë ¥</h4>
                            <button onclick="removeWidget('${widget.id}')" style="color: #6b7280; background: none; border: none; cursor: pointer;">âœ•</button>
                        </div>
                        <div style="text-align: center; flex: 1;">
                            <div style="font-size: 0.875rem; font-weight: 500; margin-bottom: 0.5rem;">${new Date().toLocaleDateString('ko-KR', { year: 'numeric', month: 'long' })}</div>
                            <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 0.125rem; font-size: 0.625rem;">
                                ${['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '].map(day => `<div style="font-weight: 500; color: #6b7280;">${day}</div>`).join('')}
                                ${Array.from({length: 31}, (_, i) => `<div style="padding: 0.125rem; ${i + 1 === new Date().getDate() ? 'background: #3b82f6; color: white; border-radius: 0.125rem;' : ''}">${i + 1}</div>`).join('')}
                            </div>
                        </div>
                    `;
                    break;
            }

            div.innerHTML = content;

            // ì‹œê³„ ì—…ë°ì´íŠ¸
            if (widget.type === 'clock') {
                updateClock(widget.id);
                setInterval(() => updateClock(widget.id), 1000);
            }

            return div;
        }

        // í´ë” ë Œë”ë§
        function renderFolders() {
            const foldersGrid = document.getElementById('foldersGrid');
            foldersGrid.innerHTML = '';

            favoritesData.folders.forEach((folder, index) => {
                const folderElement = createFolderElement(folder, index);
                foldersGrid.appendChild(folderElement);
            });
        }

        // í´ë” ì—˜ë¦¬ë¨¼íŠ¸ ìƒì„±
        function createFolderElement(folder, index) {
            const div = document.createElement('div');
            div.className = 'folder';
            div.draggable = true;
            div.dataset.folderIndex = index;
            div.dataset.folderId = folder.id;

            div.innerHTML = `
                <div class="folder-header">
                    <div class="folder-title" onclick="editFolder('${folder.id}')">
                        <span>ğŸ“</span>
                        <span>${folder.name}</span>
                    </div>
                    <button class="delete-btn" onclick="deleteFolder('${folder.id}')">âœ•</button>
                </div>
                <div class="folder-items">
                    ${folder.items.slice(0, 10).map(websiteId => {
                        const website = [...websites, ...customSites].find(w => w.id === websiteId);
                        if (!website) return '';
                        return `
                            <div class="folder-item" draggable="true" data-website-id="${websiteId}">
                                <div class="item-content">
                                    <img src="https://www.google.com/s2/favicons?domain=${website.url}&sz=16" alt="" class="favicon">
                                    <a href="${website.url}" target="_blank" class="site-title">${website.title}</a>
                                </div>
                                <button class="remove-btn" onclick="removeFromFavorites('${websiteId}')">Ã—</button>
                            </div>
                        `;
                    }).join('')}
                    ${folder.items.length === 0 ? '<p style="font-size: 0.75rem; color: #6b7280; font-style: italic;">ì‚¬ì´íŠ¸ë¥¼ ë“œë˜ê·¸í•˜ì„¸ìš” (ìµœëŒ€ 10ê°œ)</p>' : ''}
                    ${folder.items.length >= 10 ? '<p style="font-size: 0.75rem; color: #f59e0b;">í´ë”ê°€ ê°€ë“ì°¼ìŠµë‹ˆë‹¤ (10/10)</p>' : ''}
                </div>
            `;

            return div;
        }

        // ì¦ê²¨ì°¾ê¸° ëª©ë¡ ë Œë”ë§
        function renderFavoritesList() {
            const favoritesGrid = document.getElementById('favoritesGrid');
            favoritesGrid.innerHTML = '';

            favoritesData.items.forEach(websiteId => {
                const website = [...websites, ...customSites].find(w => w.id === websiteId);
                if (website) {
                    const favoriteElement = createFavoriteElement(website);
                    favoritesGrid.appendChild(favoriteElement);
                }
            });
        }

        // ì¦ê²¨ì°¾ê¸° ì—˜ë¦¬ë¨¼íŠ¸ ìƒì„±
        function createFavoriteElement(website) {
            const div = document.createElement('div');
            div.className = 'favorite-item';
            div.draggable = true;
            div.dataset.websiteId = website.id;

            div.innerHTML = `
                <div class="item-content">
                    <img src="https://www.google.com/s2/favicons?domain=${website.url}&sz=16" alt="" class="favicon">
                    <a href="${website.url}" target="_blank" class="site-title">${website.title}</a>
                </div>
                <button class="remove-btn" onclick="removeFromFavorites('${website.id}')">Ã—</button>
            `;

            return div;
        }

        // ì¹´í…Œê³ ë¦¬ ë Œë”ë§
        function renderCategories() {
            const categoriesGrid = document.getElementById('categoriesGrid');
            categoriesGrid.innerHTML = '';

            // ì¦ê²¨ì°¾ê¸°ëœ ì‚¬ì´íŠ¸ ID ëª©ë¡
            const favoriteIds = getAllFavoriteIds();
            
            // ì¹´í…Œê³ ë¦¬ë³„ë¡œ ì‚¬ì´íŠ¸ ë¶„ë¥˜ (ì¦ê²¨ì°¾ê¸° ì œì™¸)
            const categorizedSites = {};
            [...websites, ...customSites].forEach(website => {
                if (!favoriteIds.includes(website.id)) {
                    if (!categorizedSites[website.category]) {
                        categorizedSites[website.category] = [];
                    }
                    categorizedSites[website.category].push(website);
                }
            });

            // ì¹´í…Œê³ ë¦¬ ìˆœì„œ
            const categoryOrder = Object.keys(categoryConfig);

            categoryOrder.forEach(category => {
                if (categorizedSites[category]) {
                    const categoryElement = createCategoryElement(category, categorizedSites[category]);
                    categoriesGrid.appendChild(categoryElement);
                }
            });
        }

        // ì¹´í…Œê³ ë¦¬ ì—˜ë¦¬ë¨¼íŠ¸ ìƒì„±
        function createCategoryElement(category, sites) {
            const config = categoryConfig[category];
            const isExpanded = expandedCategories.has(category);
            const displaySites = isExpanded ? sites : sites.slice(0, 4);
            const hasMore = sites.length > 4;

            const div = document.createElement('div');
            div.className = 'sfu-category-card';

            div.innerHTML = `
                <div class="category-header">
                    <span class="category-icon">${config.icon}</span>
                    <span class="category-title">${category}</span>
                </div>
                <div class="category-content">
                    <div class="websites-list">
                        ${displaySites.map(website => `
                            <div class="website-item" onclick="window.open('${website.url}', '_blank')">
                                <img src="https://www.google.com/s2/favicons?domain=${website.url}&sz=16" alt="" class="website-favicon">
                                <div class="website-info">
                                    <div class="website-title">${website.title}</div>
                                    ${showDescriptions ? `<div class="website-description">${website.description}</div>` : ''}
                                </div>
                                <button class="star-btn ${getAllFavoriteIds().includes(website.id) ? 'favorited' : ''}" onclick="event.stopPropagation(); toggleFavorite('${website.id}')">
                                    ${getAllFavoriteIds().includes(website.id) ? 'â˜…' : 'â˜†'}
                                </button>
                            </div>
                        `).join('')}
                    </div>
                    ${hasMore ? `
                        <button class="more-btn" onclick="toggleCategory('${category}')">
                            ${isExpanded ? 'â–² ì ‘ê¸°' : `â–¼ ë”ë³´ê¸° (+${sites.length - 4})`}
                        </button>
                    ` : ''}
                </div>
            `;

            return div;
        }

        // ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì„¤ì •
        function setupDragAndDrop() {
            // ìœ„ì ¯ ë“œë˜ê·¸ ì•¤ ë“œë¡­
            const widgetsGrid = document.getElementById('widgetsGrid');
            if (widgetsGrid) {
                new Sortable(widgetsGrid, {
                    animation: 150,
                    ghostClass: 'dragging',
                    onEnd: function(evt) {
                        const oldIndex = evt.oldIndex;
                        const newIndex = evt.newIndex;
                        if (oldIndex !== newIndex) {
                            moveWidget(oldIndex, newIndex);
                        }
                    }
                });
            }

            // í´ë” ë“œë˜ê·¸ ì•¤ ë“œë¡­
            const foldersGrid = document.getElementById('foldersGrid');
            if (foldersGrid) {
                new Sortable(foldersGrid, {
                    animation: 150,
                    ghostClass: 'dragging',
                    onEnd: function(evt) {
                        const oldIndex = evt.oldIndex;
                        const newIndex = evt.newIndex;
                        if (oldIndex !== newIndex) {
                            moveFolder(oldIndex, newIndex);
                        }
                    }
                });
            }

            // ì¦ê²¨ì°¾ê¸° ë“œë˜ê·¸ ì•¤ ë“œë¡­
            const favoritesGrid = document.getElementById('favoritesGrid');
            if (favoritesGrid) {
                new Sortable(favoritesGrid, {
                    group: {
                        name: 'websites',
                        pull: 'clone',
                        put: false
                    },
                    animation: 150,
                    ghostClass: 'dragging'
                });
            }

            // ê° í´ë”ì— ë“œë¡­ ê¸°ëŠ¥ ì¶”ê°€
            document.querySelectorAll('.folder').forEach(folder => {
                new Sortable(folder.querySelector('.folder-items'), {
                    group: 'websites',
                    animation: 150,
                    ghostClass: 'dragging',
                    onAdd: function(evt) {
                        const websiteId = evt.item.dataset.websiteId;
                        const folderId = folder.dataset.folderId;
                        moveWebsiteToFolder(websiteId, folderId);
                        evt.item.remove(); // ì›ë³¸ ì œê±°
                    }
                });
            });
        }

        // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
        function getAllFavoriteIds() {
            const folderItems = favoritesData.folders.flatMap(folder => folder.items);
            return [...favoritesData.items, ...folderItems];
        }

        function moveWebsiteToFolder(websiteId, toFolderId) {
            // í˜„ì¬ ìœ„ì¹˜ì—ì„œ ì œê±°
            favoritesData.items = favoritesData.items.filter(id => id !== websiteId);
            favoritesData.folders = favoritesData.folders.map(folder => ({
                ...folder,
                items: folder.items.filter(id => id !== websiteId)
            }));

            // ìƒˆ ìœ„ì¹˜ì— ì¶”ê°€
            if (toFolderId) {
                const folderIndex = favoritesData.folders.findIndex(f => f.id === toFolderId);
                if (folderIndex >= 0 && favoritesData.folders[folderIndex].items.length < 10) {
                    favoritesData.folders[folderIndex].items.push(websiteId);
                }
            } else {
                favoritesData.items.push(websiteId);
            }

            saveData();
            renderFavorites();
            renderCategories();
            setupDragAndDrop();
        }

        function moveWidget(fromIndex, toIndex) {
            const widgets = [...favoritesData.widgets];
            const [moved] = widgets.splice(fromIndex, 1);
            widgets.splice(toIndex, 0, moved);
            favoritesData.widgets = widgets;
            saveData();
            renderWidgets();
            setupDragAndDrop();
        }

        function moveFolder(fromIndex, toIndex) {
            const folders = [...favoritesData.folders];
            const [moved] = folders.splice(fromIndex, 1);
            folders.splice(toIndex, 0, moved);
            favoritesData.folders = folders;
            saveData();
            renderFolders();
            setupDragAndDrop();
        }

        // ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë“¤
        function toggleFavorite(websiteId) {
            const isCurrentlyFavorited = getAllFavoriteIds().includes(websiteId);
            
            if (isCurrentlyFavorited) {
                // ì¦ê²¨ì°¾ê¸°ì—ì„œ ì œê±°
                removeFromFavorites(websiteId);
            } else {
                // ì¦ê²¨ì°¾ê¸°ì— ì¶”ê°€
                favoritesData.items.push(websiteId);
                saveData();
                renderFavorites();
                renderCategories();
                setupDragAndDrop();
            }
        }

        function removeFromFavorites(websiteId) {
            favoritesData.items = favoritesData.items.filter(id => id !== websiteId);
            favoritesData.folders = favoritesData.folders.map(folder => ({
                ...folder,
                items: folder.items.filter(id => id !== websiteId)
            }));
            saveData();
            renderFavorites();
            renderCategories();
            setupDragAndDrop();
        }

        function toggleCategory(category) {
            if (expandedCategories.has(category)) {
                expandedCategories.delete(category);
            } else {
                expandedCategories.add(category);
            }
            renderCategories();
        }

        function toggleDescriptions() {
            showDescriptions = !showDescriptions;
            renderCategories();
        }

        function createFolder() {
            const nameInput = document.getElementById('folderNameInput');
            const name = nameInput.value.trim();
            
            if (name) {
                const newFolder = {
                    id: Date.now().toString(),
                    name: name,
                    items: []
                };
                
                favoritesData.folders.push(newFolder);
                saveData();
                renderFolders();
                setupDragAndDrop();
                
                nameInput.value = '';
                hideNewFolderInput();
            }
        }

        function deleteFolder(folderId) {
            const folderIndex = favoritesData.folders.findIndex(f => f.id === folderId);
            if (folderIndex >= 0) {
                // í´ë” í•­ëª©ë“¤ì„ ì¦ê²¨ì°¾ê¸°ë¡œ ì´ë™
                const folderItems = favoritesData.folders[folderIndex].items;
                favoritesData.items.push(...folderItems);
                
                // í´ë” ì œê±°
                favoritesData.folders = favoritesData.folders.filter(f => f.id !== folderId);
                
                saveData();
                renderFavorites();
                renderCategories();
                setupDragAndDrop();
            }
        }

        function editFolder(folderId) {
            const folder = favoritesData.folders.find(f => f.id === folderId);
            if (folder) {
                const newName = prompt('í´ë” ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”:', folder.name);
                if (newName && newName.trim() !== folder.name) {
                    folder.name = newName.trim();
                    saveData();
                    renderFolders();
                    setupDragAndDrop();
                }
            }
        }

        function addWidget(type) {
            const newWidget = {
                id: Date.now().toString(),
                type: type,
                title: type,
                position: { x: 0, y: 0 },
                size: { width: 200, height: 150 }
            };

            favoritesData.widgets.push(newWidget);
            saveData();
            renderFavorites();
            setupDragAndDrop();
            closeWidgetModal();
        }

        function removeWidget(widgetId) {
            favoritesData.widgets = favoritesData.widgets.filter(w => w.id !== widgetId);
            saveData();
            renderFavorites();
            setupDragAndDrop();
        }

        // ì‹œê³„ ì—…ë°ì´íŠ¸
        function updateClock(widgetId) {
            const clockElement = document.getElementById(`clock-${widgetId}`);
            if (clockElement) {
                const now = new Date();
                const timeString = now.toLocaleTimeString('ko-KR', { hour12: false });
                clockElement.textContent = timeString;
            }
        }

        // ëª¨ë‹¬ ê´€ë ¨ í•¨ìˆ˜ë“¤
        function openContactModal() {
            document.getElementById('contactModal').classList.add('open');
        }

        function closeContactModal() {
            document.getElementById('contactModal').classList.remove('open');
        }

        function openAddSiteModal() {
            document.getElementById('addSiteModal').classList.add('open');
        }

        function closeAddSiteModal() {
            document.getElementById('addSiteModal').classList.remove('open');
        }

        function showWidgetSelector() {
            document.getElementById('widgetModal').classList.add('open');
        }

        function closeWidgetModal() {
            document.getElementById('widgetModal').classList.remove('open');
        }

        function showNewFolderInput() {
            document.getElementById('newFolderInput').classList.remove('hidden');
            document.getElementById('folderNameInput').focus();
        }

        function hideNewFolderInput() {
            document.getElementById('newFolderInput').classList.add('hidden');
        }

        function submitContact(event) {
            event.preventDefault();
            alert('ë¬¸ì˜ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤. ë¹ ë¥¸ ì‹œì¼ ë‚´ì— ë‹µë³€ë“œë¦¬ê² ìŠµë‹ˆë‹¤.');
            closeContactModal();
        }

        function submitAddSite(event) {
            event.preventDefault();
            
            const title = document.getElementById('siteTitle').value;
            const url = document.getElementById('siteUrl').value;
            const description = document.getElementById('siteDescription').value;
            const category = document.getElementById('siteCategory').value;
            
            const newSite = {
                id: Date.now().toString(),
                title: title,
                url: url,
                description: description,
                category: category
            };
            
            customSites.push(newSite);
            saveData();
            renderCategories();
            
            // í¼ ì´ˆê¸°í™”
            document.getElementById('siteTitle').value = '';
            document.getElementById('siteUrl').value = '';
            document.getElementById('siteDescription').value = '';
            document.getElementById('siteCategory').value = '';
            
            closeAddSiteModal();
            alert('ì‚¬ì´íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        // ê¸°íƒ€ í•¨ìˆ˜ë“¤
        function updateVisitorCount() {
            // ë°©ë¬¸ì ìˆ˜ ì‹œë®¬ë ˆì´ì…˜
            const today = Math.floor(Math.random() * 5000) + 1000;
            const total = Math.floor(Math.random() * 50000) + 10000;
            
            document.getElementById('todayCount').textContent = today.toLocaleString();
            document.getElementById('totalCount').textContent = total.toLocaleString();
        }

        function setAsHomepage() {
            try {
                if (navigator.userAgent.includes('Chrome')) {
                    alert('í¬ë¡¬ì—ì„œëŠ” ì„¤ì • > ì‹œì‘ ê·¸ë£¹ì—ì„œ ì§ì ‘ ì„¤ì •í•´ì£¼ì„¸ìš”.');
                } else {
                    window.home();
                }
            } catch (e) {
                alert('ë¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ ì§ì ‘ ì‹œì‘í˜ì´ì§€ë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”.');
            }
        }

        function saveSettings() {
            alert('ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        function goHome() {
            window.location.reload();
        }

        function handleSignup() {
            alert('íšŒì›ê°€ì… ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì‹œê² ìŠµë‹ˆê¹Œ? í˜„ì¬ëŠ” ë°ëª¨ ë²„ì „ì…ë‹ˆë‹¤.');
        }

        function openNaverWeather() {
            window.open('https://weather.naver.com', '_blank');
        }

        function openWeatherLocation(widgetId) {
            const locations = ['ì„œìš¸', 'ë¶€ì‚°', 'ëŒ€êµ¬', 'ì¸ì²œ', 'ê´‘ì£¼', 'ëŒ€ì „', 'ìš¸ì‚°', 'ì œì£¼'];
            const selected = prompt('ìœ„ì¹˜ë¥¼ ì„ íƒí•˜ì„¸ìš”:\n' + locations.join(', '), 'ì„œìš¸');
            if (selected && locations.includes(selected)) {
                // ìœ„ì¹˜ ë³€ê²½ ë¡œì§
                alert(`ìœ„ì¹˜ê°€ ${selected}ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.`);
            }
        }

        function saveMemo(widgetId, content) {
            // ë©”ëª¨ ì €ì¥ ë¡œì§
            const widget = favoritesData.widgets.find(w => w.id === widgetId);
            if (widget) {
                widget.content = content;
                saveData();
            }
        }

        function addTodo(widgetId, input) {
            const text = input.value.trim();
            if (text) {
                const todoList = document.getElementById(`todo-list-${widgetId}`);
                const todoItem = document.createElement('div');
                todoItem.style.cssText = 'display: flex; align-items: center; gap: 0.25rem; margin-bottom: 0.25rem;';
                todoItem.innerHTML = `
                    <input type="checkbox" style="margin: 0;">
                    <span style="flex: 1;">${text}</span>
                    <button onclick="this.parentElement.remove()" style="background: #ef4444; color: white; border: none; width: 1rem; height: 1rem; border-radius: 50%; font-size: 0.625rem; cursor: pointer;">Ã—</button>
                `;
                todoList.appendChild(todoItem);
                input.value = '';
            }
        }

        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
        document.addEventListener('click', function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('open');
            }
        });

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>