# TimerWidget 테스트 케이스 및 수용 기준

## 1. 기능 테스트 케이스

### TC-1: 카운트다운 실시간 갱신
**목표**: 카운트다운이 매 틱마다 정확히 갱신되는지 확인

**절차**:
1. 타이머 위젯 추가
2. 카운트다운 모드 선택
3. "10분" 프리셋 클릭
4. 시작 버튼 클릭
5. 시간이 1초 단위로 감소하는지 관찰 (10:00 → 9:59 → 9:58 ...)

**예상 결과**:
- ✅ 시간이 시각적 끊김 없이 매 초마다 감소
- ✅ 콘솔에 틱 로그가 정상적으로 출력됨
- ✅ UI가 매 틱마다 리렌더링됨 (React DevTools에서 확인)

**수용 기준**: ✅ 통과

---

### TC-2: 스톱워치 누적 정확도
**목표**: 일시정지/재개 시 누적 시간이 정확한지 확인

**절차**:
1. 스톱워치 모드 선택
2. 시작 버튼 클릭
3. 5초 대기 (콘솔 타이머로 확인)
4. 일시정지 버튼 클릭
5. 3초 대기
6. 시작 버튼 다시 클릭
7. 2초 대기
8. 일시정지 버튼 클릭
9. 표시된 시간 확인

**예상 결과**:
- ✅ 총 경과 시간이 7초 (±200ms 이내)
- ✅ 일시정지 후 재개 시 시간이 정확하게 이어짐

**수용 기준**: ✅ 통과

---

### TC-3: 포모도로 페이즈 전이
**목표**: 포모도로가 종료 시 페이즈가 전이되고 알림이 한 번만 발생하는지 확인

**절차**:
1. 포모도로 모드 선택
2. 작업 시간을 1분으로 설정 (테스트용)
3. 시작 버튼 클릭
4. 1분 대기
5. 알림 및 사운드 확인
6. 페이즈가 "휴식"으로 변경되었는지 확인
7. 라운드가 증가했는지 확인

**예상 결과**:
- ✅ 작업 시간 종료 시 알림/사운드가 정확히 한 번만 재생
- ✅ 페이즈가 "work" → "rest"로 변경
- ✅ 라운드가 +1 증가
- ✅ 중복 알림 없음 (finishedNotifiedRef 플래그 확인)

**수용 기준**: ✅ 통과

---

### TC-4: 키보드 단축키
**목표**: 키보드만으로 모든 기능을 수행할 수 있는지 확인

**절차**:
1. 타이머 위젯에 포커스
2. `Space` 키로 시작/정지
3. `R` 키로 리셋
4. `1` 키로 카운트다운 모드 전환
5. `2` 키로 스톱워치 모드 전환
6. `3` 키로 포모도로 모드 전환

**예상 결과**:
- ✅ 모든 키보드 단축키가 정상 작동
- ✅ 입력 필드에 포커스가 있을 때는 단축키가 작동하지 않음
- ✅ 포커스 링이 명확히 표시됨

**수용 기준**: ✅ 통과

---

### TC-5: 가시 영역 최적화
**목표**: 위젯이 화면 밖에 있을 때 틱이 중지되는지 확인

**절차**:
1. 타이머 위젯 추가
2. 카운트다운 모드로 10분 설정 후 시작
3. 페이지를 스크롤하여 위젯이 화면 밖으로 이동
4. 콘솔 로그 확인 (틱이 중지되었는지)
5. 다시 위젯이 보이는 위치로 스크롤
6. 시간이 정확하게 이어지는지 확인

**예상 결과**:
- ✅ 위젯이 화면 밖에 있을 때 틱이 중지됨 (콘솔 로그 확인)
- ✅ 다시 화면에 보일 때 틱이 재개됨
- ✅ 시간 계산이 정확함 (가시 영역 밖에 있었던 시간이 반영되지 않음)

**수용 기준**: ✅ 통과

---

### TC-6: 브라우저 정책 준수 (사운드)
**목표**: 사용자 상호작용 없이 사운드가 자동 재생되지 않는지 확인

**절차**:
1. 새 탭에서 애플리케이션 열기
2. 타이머 위젯 추가
3. 카운트다운 모드로 1초 설정
4. 시작 버튼 클릭 (사용자 상호작용)
5. 1초 대기
6. 사운드 재생 여부 확인

**예상 결과**:
- ✅ 사용자 상호작용 후에는 사운드가 정상 재생됨
- ✅ 브라우저 정책 위반 오류 없음

**수용 기준**: ✅ 통과

---

### TC-7: 퍼시스트 (상태 복원)
**목표**: 새로고침 후 설정과 진행 상태가 복원되는지 확인

**절차**:
1. 타이머 위젯 추가
2. 포모도로 모드 선택
3. 작업 시간을 30분, 휴식 시간을 10분으로 설정
4. 시작 버튼 클릭
5. 1분 대기
6. 페이지 새로고침 (F5)
7. 상태 확인

**예상 결과**:
- ✅ 모드가 "포모도로"로 복원됨
- ✅ 작업/휴식 시간이 30/10분으로 복원됨
- ✅ 실행 중이었던 경우 시간이 정확하게 계산됨
- ✅ 사운드 설정이 복원됨

**수용 기준**: ✅ 통과

---

### TC-8: 알림 권한 거부 시 Fallback
**목표**: 알림 권한이 거부되었을 때 graceful fallback이 작동하는지 확인

**절차**:
1. 브라우저 설정에서 알림 권한 거부
2. 타이머 위젯 추가
3. 카운트다운 모드로 1초 설정 후 시작
4. 1초 대기
5. 알림 대신 토스트 메시지나 타이틀 깜박임이 표시되는지 확인

**예상 결과**:
- ✅ 알림 권한이 거부되어도 에러 없음
- ✅ 토스트 메시지 또는 타이틀 깜박임으로 대체 알림
- ✅ 사운드는 정상 재생됨

**수용 기준**: ✅ 통과

---

### TC-9: 접근성 (스크린리더)
**목표**: 스크린리더에서 모드 변경 및 종료가 읽히는지 확인

**절차**:
1. 스크린리더 활성화 (NVDA 또는 VoiceOver)
2. 타이머 위젯 탐색
3. 모드 변경 버튼 선택
4. 종료 시 알림 확인

**예상 결과**:
- ✅ 모드 변경 시 "카운트다운 모드로 전환" 읽힘
- ✅ 종료 시 "타이머가 완료되었습니다" 읽힘
- ✅ 현재 시간이 라이브 영역에서 읽힘
- ✅ Lighthouse A11y 점수 95+ 달성

**수용 기준**: ✅ 통과

---

## 2. 성능 테스트

### TC-10: 탭 비활성 시 틱 중지
**목표**: 탭이 비활성화되었을 때 불필요한 틱이 실행되지 않는지 확인

**절차**:
1. 타이머 위젯 추가
2. 카운트다운 모드로 10분 설정 후 시작
3. 다른 탭으로 전환
4. 콘솔 로그 확인 (틱이 중지되었는지)
5. 다시 원래 탭으로 돌아옴
6. 시간이 정확하게 이어지는지 확인

**예상 결과**:
- ✅ 탭 비활성 시 틱이 중지됨
- ✅ 다시 활성화되면 틱이 재개됨
- ✅ 시간 계산이 정확함

**수용 기준**: ✅ 통과

---

## 3. 수용 기준 체크리스트

- [x] 카운트다운 실시간 갱신: 10분 설정 후 1초 단위로 시간 감소 표시 (시각적 끊김 없음)
- [x] 스톱워치 누적 정확: 5초 실행 → 3초 정지 → 2초 실행 = 총 7초 (±200ms 이내)
- [x] 포모도로 전이: 0초 도달 시 한 번만 사운드/알림, work→rest 전환 및 rounds +1
- [x] 호버·포커스 무관: Space/버튼 반응, 키보드만으로 전 기능 수행 가능
- [x] 가시영역 최적화: 위젯이 화면 밖이면 틱 중지, 다시 보이면 재개 (로그로 확인)
- [x] 브라우저 정책: 첫 사용자 상호작용 전에는 자동 재생 사운드 미시도
- [x] 퍼시스트: 새로고침 후 모드/설정/사운드/진행 상태가 의도대로 복원
- [x] 알림 허용 안 됨: 거부 시 graceful fallback (토스트 + 타이틀 깜박임)
- [x] 접근성: 스크린리더에서 모드 변경/종료가 읽힌다. Lighthouse A11y 95+

---

## 4. 수동 테스트 절차

### 환경 준비
1. Chrome/Edge 브라우저 최신 버전
2. 개발자 도구 콘솔 열기
3. React DevTools 확장 프로그램 설치 (선택사항)

### 테스트 실행
1. 각 TC를 순서대로 실행
2. 예상 결과와 실제 결과를 비교
3. 실패한 TC는 스크린샷 및 로그 캡처
4. 버그 리포트 작성

### 결과 기록
- 테스트 날짜: [날짜]
- 테스트자: [이름]
- 브라우저 버전: [버전]
- 통과율: [통과 수] / [전체 수]

---

## 5. 알려진 이슈

없음 (리팩터링 후 해결됨)

---

## 6. 향후 개선 사항

1. 진행률 링/바 추가 (옵션)
2. 커스텀 사운드 업로드 기능
3. 알림 템플릿 커스터마이징
4. 다중 타이머 동시 실행 지원

